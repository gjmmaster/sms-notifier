name: Manter RepositÃ³rio Ativo (TESTE)

on:
  schedule:
    - cron: '0 0 * * 0'  # Todo domingo Ã  meia-noite UTC
  workflow_dispatch:

permissions:
  contents: write

jobs:
  keepalive:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Teste completo do keepalive (sempre cria commit)
        run: |
          echo "ðŸ” Verificando Ãºltima atividade do repositÃ³rio..."
          
          # Obter data do Ãºltimo commit
          LAST_COMMIT_DATE=$(git log -1 --format=%ct)
          CURRENT_DATE=$(date +%s)
          DAYS_DIFF=$(( (CURRENT_DATE - LAST_COMMIT_DATE) / 86400 ))
          
          echo "Ãšltimo commit hÃ¡ $DAYS_DIFF dias"
          
          # PARA TESTE: sempre criar commit (remover depois)
          echo "ðŸ§ª MODO TESTE: ForÃ§ando criaÃ§Ã£o de keepalive para validar funcionamento..."
          
          # Configurar git
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          
          # Criar arquivo keepalive com timestamp Ãºnico
          echo "Last keepalive: $(date)" > .github/keepalive
          echo "Test run: $(date +%s)" >> .github/keepalive
          
          # Commit e push
          git add .github/keepalive
          git commit -m "chore: keepalive automÃ¡tico (TESTE) - $(date)"
          git push
          
          echo "âœ… Keepalive de teste criado com sucesso!"
